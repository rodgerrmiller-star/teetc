
<!DOCTYPE html>
<html lang="en">
<head>
<title>Application Form</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
<h2>Application Form</h2>

<form name="application" method="POST" data-netlify="true"><input type="hidden" name="form-name" value="application">
  <div class="mb-3">
    <label for="fullName" class="form-label">Full name (as on certificates)</label>
    <input required type="text" class="form-control" id="fullName" name="fullName" placeholder="e.g. JOSEPH K. OTIENO">
  </div>

  <div class="mb-3">
    <label for="dob" class="form-label">Date of birth</label>
    <input required type="date" class="form-control" id="dob" name="dob">
  </div>

  <div class="mb-3">
    <label for="courseCategory" class="form-label">Course category</label>
    <select required id="courseCategory" name="courseCategory" class="form-select">
      <option value="">-- Select a course --</option>
    </select>
    <small class="form-text text-muted">The list is fetched from the Courses page.</small>
  </div>

  <div class="mb-3">
    <label for="email" class="form-label">Email address</label>
    <input required type="email" class="form-control" id="email" name="email" placeholder="you@example.com">
  </div>

  <div class="mb-3">
    <label for="idNumber" class="form-label">ID Number</label>
    <input required type="text" class="form-control" id="idNumber" name="idNumber" placeholder="e.g. 12345678">
  </div>

  <div class="mb-3">
    <label for="phone" class="form-label">Phone Number</label>
    <input required type="tel" class="form-control" id="phone" name="phone" placeholder="e.g. +2547XXXXXXXX">
  </div>

  <button type="submit" class="btn btn-primary">Submit Application</button>
</form>

<script>
// Populate course dropdown by scraping course headings from courses.html
fetch('courses.html').then(r => r.text()).then(text => {
  const parser = new DOMParser();
  const doc = parser.parseFromString(text, 'text/html');
  const items = [];
  // gather headings for course cards (h4 elements)
  doc.querySelectorAll('.course-body h4').forEach(h => {
    const txt = h.textContent.trim();
    if (txt) items.push(txt);
  });
  const select = document.getElementById('courseCategory');
  // remove duplicates
  items.filter((v,i,a)=>a.indexOf(v)===i).forEach(it => {
    const opt = document.createElement('option');
    opt.value = it;
    opt.textContent = it;
    select.appendChild(opt);
  });
}).catch(e => console.error('Could not populate courses list', e));
</script>

<br>
<a href="tel:254712931101" style="background:green;color:white;padding:10px;">Proceed to Payment</a>
</body>
</html>
